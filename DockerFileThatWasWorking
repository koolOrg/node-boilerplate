# FROM ubuntu:20.04

# ENV DEBIAN_FRONTEND=noninteractive

# WORKDIR /app

# # Install Node.js and npm
# RUN apt-get update && apt-get install -y curl
# RUN curl -fsSL https://deb.nodesource.com/setup_14.x | bash -
# RUN apt-get install -y nodejs ffmpeg fonts-roboto 
# RUN rm -rf /var/lib/apt/lists/*

# # Ensure npm and node are installed
# RUN node -v
# RUN npm -v

# # Ensure the fonts are registered
# RUN fc-cache -fv
# # Copy the application files
# COPY . .

# # Install Node.js dependencies
# RUN npm install

# # Set environment variable for ffprobe path
# ENV FFPROBE_PATH /app/node_modules/ffprobe-static/bin/ffprobe

# # Expose port 3000
# EXPOSE 3000

# # Map volumes for input and output directories
# VOLUME ["/app/src/input", "/app/src/output"]

# # Use an environment variable to choose between 'dev' and 'prod' modes
# ARG ENV_MODE=prod

# # Use a conditional statement to set the command based on the environment mode
# CMD if [ "$ENV_MODE" = "dev" ]; then npm run dev; else npm start; fi


# # docker build -t contentidea-backend .

# #for prod
# # docker run -p 3000:3000 -v $(pwd)/src/input:/app/src/input -v $(pwd)/src/output:/app/src/output contentidea-backend

# #docker run -p 3000:3000 -v "$(pwd)/src/input:/app/src/input" -v "$(pwd)/src/output:/app/src/output" -e ENV_MODE=dev contentidea-backend

# #detached mode
# # docker run -d -p 3000:3000 -v "$(pwd)/src/input:/app/src/input" -v "$(pwd)/src/output:/app/src/output" -e ENV_MODE=dev contentidea-backend
# # docker run -d --name contentidea-backend-container -p 3000:3000 -v "$(pwd)/src/input:/app/src/input" -v "$(pwd)/src/output:/app/src/output" -e ENV_MODE=dev contentidea-backend

# #for dev
# # docker run -p 3000:3000 -v $(pwd)/src/input:/app/src/input -v $(pwd)/src/output:/app/src/output -e ENV_MODE=dev contentidea-backend 


# # @stop all docker container
# # docker ps -q | % { docker stop $_ }

# ## This is to expose the Ffmpeg file to the container
# # docker run -p 3000:3000 -v "$(pwd)/src/input:/app/src/input" -v "$(pwd)/src/output:/app/src/output" -v "$(pwd)/src/utils/:/app/src/utils" -e ENV_MODE=dev contentidea-backend




# ##for subtitle
# #separate docker container
# ## apt-get update && apt-get install -y ffmpeg python3 python3-pip git
# # pip install git+https://github.com/m1guelpf/auto-subtitle.git
# # pip install ffmpeg-python
# # https://github.com/m1guelpf/auto-subtitle


# ## add these to auto_subtitle 's cli.py file line 65'
# #     ffmpeg.concat(
# #   video.filter('subtitles', srt_path, force_style="Fontsize=10,MarginV=10,Alignment=2,OutlineColour=&H40000000,BorderStyle=3"), audio, v=1, a=1
# #   ).output(out_path).run(quiet=True, overwrite_output=True)

